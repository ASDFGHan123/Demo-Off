{"ast":null,"code":"import React,{useState}from'react';import{Form,Button,Card,ListGroup,Alert,Spinner,Badge}from'react-bootstrap';import{userAPI,chatAPI}from'../../services/api';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserSearch=()=>{const[query,setQuery]=useState('');const[results,setResults]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const navigate=useNavigate();const handleSearch=async e=>{e.preventDefault();if(!query.trim())return;setLoading(true);setError('');try{const response=await userAPI.searchUsers(query.trim());setResults(response.data.results||[]);}catch(err){setError('Failed to search users');console.error('Error searching users:',err);}finally{setLoading(false);}};const handleCreatePrivateChat=async userId=>{try{const response=await chatAPI.createPrivateChat(userId);navigate(\"/chat/\".concat(response.data.conversation_id));}catch(err){setError('Failed to create chat');console.error('Error creating private chat:',err);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-4\",children:\"Search Users\"}),/*#__PURE__*/_jsx(Card,{className:\"mb-4\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(Form,{onSubmit:handleSearch,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Search for users\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter username or display name...\",value:query,onChange:e=>setQuery(e.target.value),required:true}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",disabled:loading,children:loading?/*#__PURE__*/_jsx(Spinner,{animation:\"border\",size:\"sm\"}):'Search'})]})]})})})}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),results.length>0&&/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"Search Results\"})}),/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:results.map(user=>/*#__PURE__*/_jsxs(ListGroup.Item,{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[user.profile_image_url&&/*#__PURE__*/_jsx(\"img\",{src:user.profile_image_url,alt:user.display_name,className:\"rounded-circle me-3\",style:{width:'40px',height:'40px',objectFit:'cover'}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold\",children:user.display_name}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"@\",user.username]})]}),/*#__PURE__*/_jsx(Badge,{bg:user.is_online?'success':'secondary',className:\"ms-2\",children:user.is_online?'Online':'Offline'})]}),/*#__PURE__*/_jsx(Button,{variant:\"outline-primary\",size:\"sm\",onClick:()=>handleCreatePrivateChat(user.user_id),children:\"Start Chat\"})]},user.user_id))})]}),query&&!loading&&results.length===0&&/*#__PURE__*/_jsxs(Alert,{variant:\"info\",children:[\"No users found matching \\\"\",query,\"\\\"\"]})]});};export default UserSearch;","map":{"version":3,"names":["React","useState","Form","Button","Card","ListGroup","Alert","Spinner","Badge","userAPI","chatAPI","useNavigate","jsx","_jsx","jsxs","_jsxs","UserSearch","query","setQuery","results","setResults","loading","setLoading","error","setError","navigate","handleSearch","e","preventDefault","trim","response","searchUsers","data","err","console","handleCreatePrivateChat","userId","createPrivateChat","concat","conversation_id","children","className","Body","onSubmit","Group","Label","Control","type","placeholder","value","onChange","target","required","variant","disabled","animation","size","length","Header","map","user","Item","profile_image_url","src","alt","display_name","style","width","height","objectFit","username","bg","is_online","onClick","user_id"],"sources":["c:/Users/salaam/Desktop/OffChat/frontend/src/components/user/UserSearch.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Form, Button, Card, ListGroup, Alert, Spinner, Badge } from 'react-bootstrap';\r\nimport { userAPI, chatAPI } from '../../services/api';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\ninterface User {\r\n  user_id: number;\r\n  username: string;\r\n  display_name: string;\r\n  profile_image_url?: string;\r\n  is_online: boolean;\r\n}\r\n\r\nconst UserSearch: React.FC = () => {\r\n  const [query, setQuery] = useState('');\r\n  const [results, setResults] = useState<User[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const handleSearch = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!query.trim()) return;\r\n\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      const response = await userAPI.searchUsers(query.trim());\r\n      setResults(response.data.results || []);\r\n    } catch (err) {\r\n      setError('Failed to search users');\r\n      console.error('Error searching users:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCreatePrivateChat = async (userId: number) => {\r\n    try {\r\n      const response = await chatAPI.createPrivateChat(userId);\r\n      navigate(`/chat/${response.data.conversation_id}`);\r\n    } catch (err) {\r\n      setError('Failed to create chat');\r\n      console.error('Error creating private chat:', err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1 className=\"mb-4\">Search Users</h1>\r\n\r\n      <Card className=\"mb-4\">\r\n        <Card.Body>\r\n          <Form onSubmit={handleSearch}>\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>Search for users</Form.Label>\r\n              <div className=\"input-group\">\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  placeholder=\"Enter username or display name...\"\r\n                  value={query}\r\n                  onChange={(e) => setQuery(e.target.value)}\r\n                  required\r\n                />\r\n                <Button type=\"submit\" variant=\"primary\" disabled={loading}>\r\n                  {loading ? <Spinner animation=\"border\" size=\"sm\" /> : 'Search'}\r\n                </Button>\r\n              </div>\r\n            </Form.Group>\r\n          </Form>\r\n        </Card.Body>\r\n      </Card>\r\n\r\n      {error && <Alert variant=\"danger\">{error}</Alert>}\r\n\r\n      {results.length > 0 && (\r\n        <Card>\r\n          <Card.Header>\r\n            <h5 className=\"mb-0\">Search Results</h5>\r\n          </Card.Header>\r\n          <ListGroup variant=\"flush\">\r\n            {results.map(user => (\r\n              <ListGroup.Item key={user.user_id} className=\"d-flex justify-content-between align-items-center\">\r\n                <div className=\"d-flex align-items-center\">\r\n                  {user.profile_image_url && (\r\n                    <img\r\n                      src={user.profile_image_url}\r\n                      alt={user.display_name}\r\n                      className=\"rounded-circle me-3\"\r\n                      style={{ width: '40px', height: '40px', objectFit: 'cover' }}\r\n                    />\r\n                  )}\r\n                  <div>\r\n                    <div className=\"fw-bold\">{user.display_name}</div>\r\n                    <small className=\"text-muted\">@{user.username}</small>\r\n                  </div>\r\n                  <Badge bg={user.is_online ? 'success' : 'secondary'} className=\"ms-2\">\r\n                    {user.is_online ? 'Online' : 'Offline'}\r\n                  </Badge>\r\n                </div>\r\n                <Button\r\n                  variant=\"outline-primary\"\r\n                  size=\"sm\"\r\n                  onClick={() => handleCreatePrivateChat(user.user_id)}\r\n                >\r\n                  Start Chat\r\n                </Button>\r\n              </ListGroup.Item>\r\n            ))}\r\n          </ListGroup>\r\n        </Card>\r\n      )}\r\n\r\n      {query && !loading && results.length === 0 && (\r\n        <Alert variant=\"info\">\r\n          No users found matching \"{query}\"\r\n        </Alert>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserSearch;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}